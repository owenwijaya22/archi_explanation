import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';
import { Cloud, Server, Database, Globe, GitBranch, Box, RefreshCw, Globe2 } from 'lucide-react';

export default function ArchitectureDashboard() {
    const [metrics, setMetrics] = useState([]);
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        // Simulate fetching metrics
        const generateMetrics = () => {
            const data = [];
            for (let i = 0; i < 24; i++) {
                data.push({
                    time: `${i}:00`,
                    requests: Math.floor(Math.random() * 1000),
                    latency: Math.random() * 100,
                    errors: Math.random() * 10
                });
            }
            setMetrics(data);
            setIsLoading(false);
        };
        generateMetrics();
        const interval = setInterval(generateMetrics, 5000);
        return () => clearInterval(interval);
    }, []);

    const architectureComponents = [
        {
            title: "AWS Infrastructure",
            items: [
                { icon: Globe2, text: "Route 53 Custom Domain" },
                { icon: Cloud, text: "CloudFront CDN" },
                { icon: Box, text: "S3 Static Hosting" }
            ]
        },
        {
            title: "CI/CD Pipeline",
            items: [
                { icon: GitBranch, text: "GitHub Actions" },
                { icon: RefreshCw, text: "Automated Deployments" }
            ]
        },
        {
            title: "Backend Services",
            items: [
                { icon: Server, text: "Lambda Functions" },
                { icon: Database, text: "DynamoDB" },
                { icon: Globe, text: "API Gateway" }
            ]
        }
    ];

    return (
        <div className="min-h-screen bg-gray-50 p-8">
            <div className="max-w-7xl mx-auto">
                {/* Header */}
                <motion.div 
                    initial={{ opacity: 0, y: -20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="text-center mb-12"
                >
                    <h1 className="text-4xl font-bold text-gray-900 mb-4">
                        Modern Cloud Architecture
                    </h1>
                    <p className="text-xl text-gray-600">
                        Vite + React + Tailwind SPA with AWS Serverless Backend
                    </p>
                </motion.div>

                {/* Architecture Components */}
                <div className="grid md:grid-cols-3 gap-8 mb-12">
                    {architectureComponents.map((section, idx) => (
                        <motion.div
                            key={section.title}
                            initial={{ opacity: 0, x: -20 }}
                            animate={{ opacity: 1, x: 0 }}
                            transition={{ delay: idx * 0.2 }}
                            className="bg-white rounded-lg shadow-lg p-6"
                        >
                            <h2 className="text-2xl font-semibold mb-4 text-gray-800">
                                {section.title}
                            </h2>
                            <div className="space-y-4">
                                {section.items.map((item, index) => (
                                    <motion.div
                                        key={index}
                                        className="flex items-center space-x-3 text-gray-700"
                                        whileHover={{ scale: 1.05 }}
                                    >
                                        <item.icon className="w-6 h-6 text-blue-500" />
                                        <span>{item.text}</span>
                                    </motion.div>
                                ))}
                            </div>
                        </motion.div>
                    ))}
                </div>

                {/* Metrics Dashboard */}
                <motion.div
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="bg-white rounded-lg shadow-lg p-6"
                >
                    <h2 className="text-2xl font-semibold mb-6 text-gray-800">
                        Live Performance Metrics
                    </h2>
                    {isLoading ? (
                        <div className="h-96 flex items-center justify-center">
                            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" />
                        </div>
                    ) : (
                        <div className="h-96">
                            <ResponsiveContainer width="100%" height="100%">
                                <LineChart data={metrics}>
                                    <CartesianGrid strokeDasharray="3 3" />
                                    <XAxis dataKey="time" />
                                    <YAxis />
                                    <Tooltip />
                                    <Legend />
                                    <Line type="monotone" dataKey="requests" stroke="#2563eb" name="Requests" />
                                    <Line type="monotone" dataKey="latency" stroke="#059669" name="Latency (ms)" />
                                    <Line type="monotone" dataKey="errors" stroke="#dc2626" name="Errors" />
                                </LineChart>
                            </ResponsiveContainer>
                        </div>
                    )}
                </motion.div>

                {/* Footer */}
                <div className="text-center mt-12 text-gray-600">
                    <p>Powered by AWS Cloud Infrastructure</p>
                </div>
            </div>
        </div>
    );
}

i want to turn this into a display
